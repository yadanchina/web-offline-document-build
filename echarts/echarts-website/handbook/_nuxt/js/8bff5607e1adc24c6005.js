(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{478:function(e,n,r){"use strict";r.r(n),n.default="# Event and Action\r\n\r\nUsers can trigger corresponding events by their operation. The developer can handle the callback function by listening to these events, such as jump to a new website, pop-up a dialog box, or drill down the data.\r\n\r\nThe name of the event and the DOM event is both lowercase string. Here is an example of binding listening to `click` event.\r\n\r\n```js\r\nmyChart.on('click', function(params) {\r\n  // Print name in console\r\n  console.log(params.name);\r\n});\r\n```\r\n\r\nThere are two kinds of event in ECharts, one happened when the user clicks the mouse or hover the elements in charts, the other happened while the user triggered some interactive actions. Such as ['legendselectchanged'](${mainSitePath}api.html#events.legendselectchanged) triggered while changing the legend selected (please notice that `legendselected` won't be triggered in this situation), ['datazoom'](${mainSitePath}api.html#events.legendselectchanged) triggered while zooming the data area.\r\n\r\n## Handling the Mouse Events\r\n\r\nECharts support general mouse events: `'click'`, `'dblclick'`, `'mousedown'`, `'mousemove'`, `'mouseup'`, `'mouseover'`, `'mouseout'`, `'globalout'`, `'contextmenu'`. This is an example of opening the search result page after clicking the bar chart.\r\n\r\n```js\r\n// Init the ECharts base on DOM\r\nvar myChart = echarts.init(document.getElementById('main'));\r\n\r\n// Config\r\nvar option = {\r\n  xAxis: {\r\n    data: [\r\n      'Shirt',\r\n      'Wool sweater',\r\n      'Chiffon shirt',\r\n      'Pants',\r\n      'High-heeled shoes',\r\n      'socks'\r\n    ]\r\n  },\r\n  yAxis: {},\r\n  series: [\r\n    {\r\n      name: 'Sales',\r\n      type: 'bar',\r\n      data: [5, 20, 36, 10, 10, 20]\r\n    }\r\n  ]\r\n};\r\n// Use the option and data to display the chart\r\nmyChart.setOption(option);\r\n// Click and jump to Baidu search website\r\nmyChart.on('click', function(params) {\r\n  window.open(\r\n    'https://www.google.com/search?q=' + encodeURIComponent(params.name)\r\n  );\r\n});\r\n```\r\n\r\nAll mouse events included `params` which contained the data of the object.\r\n\r\nFormat:\r\n\r\n```js\r\ntype EventParams = {\r\n  // The component name clicked,\r\n  // component type, could be 'series'、'markLine'、'markPoint'、'timeLine', etc..\r\n  componentType: string,\r\n  // series type, could be 'line'、'bar'、'pie', etc.. Works when componentType is 'series'.\r\n  seriesType: string,\r\n  // the index in option.series. Works when componentType is 'series'.\r\n  seriesIndex: number,\r\n  // series name, works when componentType is 'series'.\r\n  seriesName: string,\r\n  // name of data (categories).\r\n  name: string,\r\n  // the index in 'data' array.\r\n  dataIndex: number,\r\n  // incoming raw data item\r\n  data: Object,\r\n  // charts like 'sankey' and 'graph' included nodeData and edgeData as the same time.\r\n  // dataType can be 'node' or 'edge', indicates whether the current click is on node or edge.\r\n  // most of charts have one kind of data, the dataType is meaningless\r\n  dataType: string,\r\n  // incoming data value\r\n  value: number | Array,\r\n  // color of the shape, works when componentType is 'series'.\r\n  color: string\r\n};\r\n```\r\n\r\nIdentify where the mouse clicked.\r\n\r\n```js\r\nmyChart.on('click', function(params) {\r\n  if (params.componentType === 'markPoint') {\r\n    // Clicked on the markPoint\r\n    if (params.seriesIndex === 5) {\r\n      // clicked on the markPoint of the series with index = 5\r\n    }\r\n  } else if (params.componentType === 'series') {\r\n    if (params.seriesType === 'graph') {\r\n      if (params.dataType === 'edge') {\r\n        // clicked at the edge of graph.\r\n      } else {\r\n        // clicked at the node of graph.\r\n      }\r\n    }\r\n  }\r\n});\r\n```\r\n\r\nUse `query` to trigger callback of the specified component:\r\n\r\n```js\r\nchart.on(eventName, query, handler);\r\n```\r\n\r\n`query` can be `string` or `Object`.\r\n\r\nIf it is `string`, the format can be `mainType` or `mainType.subType`, such as:\r\n\r\n```js\r\nchart.on('click', 'series', function () {...});\r\nchart.on('click', 'series.line', function () {...});\r\nchart.on('click', 'dataZoom', function () {...});\r\nchart.on('click', 'xAxis.category', function () {...});\r\n```\r\n\r\nIf it is `Object`, `query` can include more than one attribute:\r\n\r\n```js\r\n{\r\n  ${mainType}Index: number // component index\r\n  ${mainType}Name: string // component name\r\n  ${mainType}Id: string // component id\r\n  dataIndex: number // data item index\r\n  name: string // data item name\r\n  dataType: string // date item type, such as 'node', 'edge'\r\n  element: string // name of element in custom series.\r\n}\r\n```\r\n\r\nSuch as:\r\n\r\n```js\r\nchart.setOption({\r\n  // ...\r\n  series: [\r\n    {\r\n      name: 'uuu'\r\n      // ...\r\n    }\r\n  ]\r\n});\r\nchart.on('mouseover', { seriesName: 'uuu' }, function() {\r\n  // when elements in series named 'uuu' triggered 'mouseover'\r\n});\r\n```\r\n\r\nFor example:\r\n\r\n```js\r\nchart.setOption({\r\n  // ...\r\n  series: [\r\n    {\r\n      // ...\r\n    },\r\n    {\r\n      // ...\r\n      data: [\r\n        { name: 'xx', value: 121 },\r\n        { name: 'yy', value: 33 }\r\n      ]\r\n    }\r\n  ]\r\n});\r\nchart.on('mouseover', { seriesIndex: 1, name: 'xx' }, function() {\r\n  // when data named 'xx' in series index 1 triggered 'mouseover'.\r\n});\r\n```\r\n\r\nFor example:\r\n\r\n```js\r\nchart.setOption({\r\n  // ...\r\n  series: [\r\n    {\r\n      type: 'graph',\r\n      nodes: [\r\n        { name: 'a', value: 10 },\r\n        { name: 'b', value: 20 }\r\n      ],\r\n      edges: [{ source: 0, target: 1 }]\r\n    }\r\n  ]\r\n});\r\nchart.on('click', { dataType: 'node' }, function() {\r\n  // call this method while the node of graph was clicked.\r\n});\r\nchart.on('click', { dataType: 'edge' }, function() {\r\n  // call this method while the edge of graph was clicked.\r\n});\r\n```\r\n\r\nFor example:\r\n\r\n```js\r\nchart.setOption({\r\n  // ...\r\n  series: {\r\n    // ...\r\n    type: 'custom',\r\n    renderItem: function(params, api) {\r\n      return {\r\n        type: 'group',\r\n        children: [\r\n          {\r\n            type: 'circle',\r\n            name: 'my_el'\r\n            // ...\r\n          },\r\n          {\r\n            // ...\r\n          }\r\n        ]\r\n      };\r\n    },\r\n    data: [[12, 33]]\r\n  }\r\n});\r\nchart.on('mouseup', { element: 'my_el' }, function() {\r\n  // when data named 'my_el' triggered 'mouseup'.\r\n});\r\n```\r\n\r\nYou can display a popup, update the charts using the query result from your database by the data name or series name in the callback function. Here is an example:\r\n\r\n```js\r\nmyChart.on('click', function(parmas) {\r\n  $.get('detail?q=' + params.name, function(detail) {\r\n    myChart.setOption({\r\n      series: [\r\n        {\r\n          name: 'pie',\r\n          // using pie chart to show the data distribution in one column.\r\n          data: [detail.data]\r\n        }\r\n      ]\r\n    });\r\n  });\r\n});\r\n```\r\n\r\n## Event of Component Interaction\r\n\r\nAll Component Interaction in ECharts will trigger a corresponding event. Normal events and parameters are listed in the [events](${mainSitePath}/api.html#events) document.\r\n\r\nHere is an example of listening to legend event:\r\n\r\n```js\r\n// Show/hide the legend only trigger legendselectchanged event\r\nmyChart.on('legendselectchanged', function(params) {\r\n  // State if legend is selected.\r\n  var isSelected = params.selected[params.name];\r\n  // print in the console.\r\n  console.log(\r\n    (isSelected ? 'Selected' : 'Not Selected') + 'legend' + params.name\r\n  );\r\n  // print for all legends.\r\n  console.log(params.selected);\r\n});\r\n```\r\n\r\n## Writing Code to Trigger Component Action Manually\r\n\r\nYou can trigger events such as `'legendselectchanged'` not only by the user but also with code manually. It can be used to display the tooltip, select the legend.\r\n\r\nIn ECharts `myChart.dispatchAction({ type: '' })` is used to trigger the behavior. This manages all actions and can record the behaviors conveniently.\r\n\r\nCommonly used behavior and corresponding parameters are listed in [action](${mainSitePath}/api.html#action).\r\n\r\nThe following example shows how to highlight each sector one by one in the pie chart using `dispatchAction`.\r\n\r\n```js live\r\noption = {\r\n  tooltip: {\r\n    trigger: 'item',\r\n    formatter: '{a} <br/>{b} : {c} ({d}%)'\r\n  },\r\n  legend: {\r\n    orient: 'vertical',\r\n    left: 'left',\r\n    data: [\r\n      'Direct Access',\r\n      'Email Marketing',\r\n      'Affiliate Ads',\r\n      'Video Ads',\r\n      'Search Engines'\r\n    ]\r\n  },\r\n  series: [\r\n    {\r\n      name: 'Access Source',\r\n      type: 'pie',\r\n      radius: '55%',\r\n      center: ['50%', '60%'],\r\n      data: [\r\n        { value: 335, name: 'Direct Access' },\r\n        { value: 310, name: 'Email Marketing' },\r\n        { value: 234, name: 'Affiliate Ads' },\r\n        { value: 135, name: 'Video Ads' },\r\n        { value: 1548, name: 'Search Engines' }\r\n      ],\r\n      emphasis: {\r\n        itemStyle: {\r\n          shadowBlur: 10,\r\n          shadowOffsetX: 0,\r\n          shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n        }\r\n      }\r\n    }\r\n  ]\r\n};\r\n\r\nlet currentIndex = -1;\r\n\r\nsetInterval(function() {\r\n  var dataLen = option.series[0].data.length;\r\n  myChart.dispatchAction({\r\n    type: 'downplay',\r\n    seriesIndex: 0,\r\n    dataIndex: currentIndex\r\n  });\r\n  currentIndex = (currentIndex + 1) % dataLen;\r\n  myChart.dispatchAction({\r\n    type: 'highlight',\r\n    seriesIndex: 0,\r\n    dataIndex: currentIndex\r\n  });\r\n  myChart.dispatchAction({\r\n    type: 'showTip',\r\n    seriesIndex: 0,\r\n    dataIndex: currentIndex\r\n  });\r\n}, 1000);\r\n```\r\n\r\n## Listen to Events on the Blank Area\r\n\r\nSometimes developers need to listen to the events that are triggered from the blank of the canvas. For example, need to reset the chart when users click on the blank area.\r\n\r\nBefore we talk about this feature, we need to clarify two kinds of events: zrender events and echarts events.\r\n\r\n```js\r\nmyChart.getZr().on('click', function(event) {\r\n  // This listener is listening to a `zrender event`.\r\n});\r\nmyChart.on('click', function(event) {\r\n  // This listener is listening to a `echarts event`.\r\n});\r\n```\r\n\r\nzrender events are different from echarts events. The former one are triggered when mouse/pointer is at everywhere, while the latter one can only be triggered when mouse/pointer is at the graphic elements. In fact, echarts events are implemented based on zrender events, that is, when a zrender events is triggered at a graphic element, echarts will trigger a echarts event.\r\n\r\nHaving zrender events, we can implement listen to events from the blank as follows:\r\n\r\n```js\r\nmyChart.getZr().on('click', function(event) {\r\n  // No \"target\" means that mouse/pointer is not on\r\n  // any of the graphic elements, which is \"blank\".\r\n  if (!event.target) {\r\n    // Click on blank. Do something.\r\n  }\r\n});\r\n```\r\n"}}]);