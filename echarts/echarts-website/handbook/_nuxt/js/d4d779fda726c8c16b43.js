(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{491:function(r,n,e){"use strict";e.r(n),n.default="# Waterfall\r\n\r\nThere is no waterfall series in Apache ECharts, but we can simulate the effect using a stacked bar chart.\r\n\r\nAssuming that the values in the data array represent an increase or decrease from the previous value.\r\n\r\n```js\r\nvar data = [900, 345, 393, -108, -154, 135, 178, 286, -119, -361, -203];\r\n```\r\n\r\nThat is, the first data is `900` and the second data `345` represents the addition of `345` to `900`, etc. When presenting this data as a stepped waterfall chart, we can use three series: the first is a non-interactive transparent series to implement the suspension bar effect, the second series is used to represent positive numbers, and the third series is used to represent negative numbers.\r\n\r\n```js live\r\nvar data = [900, 345, 393, -108, -154, 135, 178, 286, -119, -361, -203];\r\nvar help = [];\r\nvar positive = [];\r\nvar negative = [];\r\nfor (var i = 0, sum = 0; i < data.length; ++i) {\r\n  if (data[i] >= 0) {\r\n    positive.push(data[i]);\r\n    negative.push('-');\r\n  } else {\r\n    positive.push('-');\r\n    negative.push(-data[i]);\r\n  }\r\n\r\n  if (i === 0) {\r\n    help.push(0);\r\n  } else {\r\n    sum += data[i - 1];\r\n    if (data[i] < 0) {\r\n      help.push(sum + data[i]);\r\n    } else {\r\n      help.push(sum);\r\n    }\r\n  }\r\n}\r\n\r\noption = {\r\n  title: {\r\n    text: 'Waterfall'\r\n  },\r\n  grid: {\r\n    left: '3%',\r\n    right: '4%',\r\n    bottom: '3%',\r\n    containLabel: true\r\n  },\r\n  xAxis: {\r\n    type: 'category',\r\n    splitLine: { show: false },\r\n    data: (function() {\r\n      var list = [];\r\n      for (var i = 1; i <= 11; i++) {\r\n        list.push('Oct/' + i);\r\n      }\r\n      return list;\r\n    })()\r\n  },\r\n  yAxis: {\r\n    type: 'value'\r\n  },\r\n  series: [\r\n    {\r\n      type: 'bar',\r\n      stack: 'all',\r\n      itemStyle: {\r\n        normal: {\r\n          barBorderColor: 'rgba(0,0,0,0)',\r\n          color: 'rgba(0,0,0,0)'\r\n        },\r\n        emphasis: {\r\n          barBorderColor: 'rgba(0,0,0,0)',\r\n          color: 'rgba(0,0,0,0)'\r\n        }\r\n      },\r\n      data: help\r\n    },\r\n    {\r\n      name: 'positive',\r\n      type: 'bar',\r\n      stack: 'all',\r\n      data: positive\r\n    },\r\n    {\r\n      name: 'negative',\r\n      type: 'bar',\r\n      stack: 'all',\r\n      data: negative,\r\n      itemStyle: {\r\n        color: '#f33'\r\n      }\r\n    }\r\n  ]\r\n};\r\n```\r\n"}}]);