(window.webpackJsonp=window.webpackJsonp||[]).push([[133],{572:function(r,n,e){"use strict";e.r(n),n.default="# 富文本标签\r\n\r\nApache ECharts<sup>TM</sup> 中的文本标签从 v3.7 开始支持富文本模式，能够：\r\n\r\n- 定制文本块整体的样式（如背景、边框、阴影等）、位置、旋转等。\r\n- 对文本块中个别片段定义样式（如颜色、字体、高宽、背景、阴影等）、对齐方式等。\r\n- 在文本中使用图片做小图标或者背景。\r\n- 特定组合以上的规则，可以做出简单表格、分割线等效果。\r\n\r\n开始下面的介绍之前，先说明一下下面会使用的两个名词的含义：\r\n\r\n- 文本块（Text Block）：文本标签块整体。\r\n- 文本片段（Text fragment）：文本标签块中的部分文本。\r\n\r\n如下图示例：\r\n\r\n<md-example src=\"doc-example/text-block-fragment\" width=\"450\" height=\"300\"></md-example>\r\n\r\n## 文本样式相关的配置项\r\n\r\necharts 提供了丰富的文本标签配置项，包括：\r\n\r\n- 字体基本样式设置：`fontStyle`、`fontWeight`、`fontSize`、`fontFamily`。\r\n- 文字颜色：`color`。\r\n- 文字描边：`textBorderColor`、`textBorderWidth`。\r\n- 文字阴影：`textShadowColor`、`textShadowBlur`、`textShadowOffsetX`、`textShadowOffsetY`。\r\n- 文本块或文本片段大小：`lineHeight`、`width`、`height`、`padding`。\r\n- 文本块或文本片段的对齐：`align`、`verticalAlign`。\r\n- 文本块或文本片段的边框、背景（颜色或图片）：`backgroundColor`、`borderColor`、`borderWidth`、`borderRadius`。\r\n- 文本块或文本片段的阴影：`shadowColor`、`shadowBlur`、`shadowOffsetX`、`shadowOffsetY`。\r\n- 文本块的位置和旋转：`position`、`distance`、`rotate`。\r\n\r\n可以在各处的 `rich` 属性中定义文本片段样式。例如 [series-bar.label.rich](option.html#series-bar.label.rich)\r\n\r\n例如：\r\n\r\n```js\r\nlabelOption = {\r\n  // 在文本中，可以对部分文本采用 rich 中定义样式。\r\n  // 这里需要在文本中使用标记符号：\r\n  // `{styleName|text content text content}` 标记样式名。\r\n  // 注意，换行仍是使用 '\\n'。\r\n  formatter: [\r\n    '{a|这段文本采用样式a}',\r\n    '{b|这段文本采用样式b}这段用默认样式{x|这段用样式x}'\r\n  ].join('\\n'),\r\n\r\n  // 这里是文本块的样式设置：\r\n  color: '#333',\r\n  fontSize: 5,\r\n  fontFamily: 'Arial',\r\n  borderWidth: 3,\r\n  backgroundColor: '#984455',\r\n  padding: [3, 10, 10, 5],\r\n  lineHeight: 20,\r\n\r\n  // rich 里是文本片段的样式设置：\r\n  rich: {\r\n    a: {\r\n      color: 'red',\r\n      lineHeight: 10\r\n    },\r\n    b: {\r\n      backgroundColor: {\r\n        image: 'xxx/xxx.jpg'\r\n      },\r\n      height: 40\r\n    },\r\n    x: {\r\n      fontSize: 18,\r\n      fontFamily: 'Microsoft YaHei',\r\n      borderColor: '#449933',\r\n      borderRadius: 4\r\n    }\r\n  }\r\n};\r\n```\r\n\r\n> 注意：如果不定义 `rich`，不能指定文字块的 `width` 和 `height`。\r\n\r\n## 文本、文本框、文本片段的基本样式和装饰\r\n\r\n每个文本可以设置基本的字体样式：`fontStyle`、`fontWeight`、`fontSize`、`fontFamily`。\r\n\r\n可以设置文字的颜色 `color` 和边框的颜色 `textBorderColor`、`textBorderWidth`。\r\n\r\n文本框可以设置边框和背景的样式：`borderColor`、`borderWidth`、`backgroundColor`、`padding`。\r\n\r\n文本片段也可以设置边框和背景的样式：`borderColor`、`borderWidth`、`backgroundColor`、`padding`。\r\n\r\n例如：\r\n\r\n```js live\r\noption = {\r\n  series: [\r\n    {\r\n      type: 'scatter',\r\n      symbolSize: 1,\r\n      data: [\r\n        {\r\n          value: [0, 0],\r\n          label: {\r\n            show: true,\r\n            formatter: [\r\n              'Plain text',\r\n              '{textBorder|textBorderColor + textBorderWidth}',\r\n              '{textShadow|textShadowColor + textShadowBlur + textShadowOffsetX + textShadowOffsetY}',\r\n              '{bg|backgroundColor + borderRadius + padding}',\r\n              '{border|borderColor + borderWidth + borderRadius + padding}',\r\n              '{shadow|shadowColor + shadowBlur + shadowOffsetX + shadowOffsetY}'\r\n            ].join('\\n'),\r\n            backgroundColor: '#eee',\r\n            borderColor: '#333',\r\n            borderWidth: 2,\r\n            borderRadius: 5,\r\n            padding: 10,\r\n            color: '#000',\r\n            fontSize: 14,\r\n            shadowBlur: 3,\r\n            shadowColor: '#888',\r\n            shadowOffsetX: 0,\r\n            shadowOffsetY: 3,\r\n            lineHeight: 30,\r\n            rich: {\r\n              textBorder: {\r\n                fontSize: 20,\r\n                textBorderColor: '#000',\r\n                textBorderWidth: 3,\r\n                color: '#fff'\r\n              },\r\n              textShadow: {\r\n                fontSize: 16,\r\n                textShadowBlur: 5,\r\n                textShadowColor: '#000',\r\n                textShadowOffsetX: 3,\r\n                textShadowOffsetY: 3,\r\n                color: '#fff'\r\n              },\r\n              bg: {\r\n                backgroundColor: '#339911',\r\n                color: '#fff',\r\n                borderRadius: 15,\r\n                padding: 5\r\n              },\r\n              border: {\r\n                color: '#000',\r\n                borderColor: '#449911',\r\n                borderWidth: 1,\r\n                borderRadius: 3,\r\n                padding: 5\r\n              },\r\n              shadow: {\r\n                backgroundColor: '#992233',\r\n                padding: 5,\r\n                color: '#fff',\r\n                shadowBlur: 5,\r\n                shadowColor: '#336699',\r\n                shadowOffsetX: 6,\r\n                shadowOffsetY: 6\r\n              }\r\n            }\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  xAxis: {\r\n    show: false,\r\n    min: -1,\r\n    max: 1\r\n  },\r\n  yAxis: {\r\n    show: false,\r\n    min: -1,\r\n    max: 1\r\n  }\r\n};\r\n```\r\n\r\n## 标签的位置\r\n\r\n对于折线图、柱状图、散点图等，均可以使用 `label` 来设置标签。标签的相对于图形元素的位置，一般使用 [label.position](option.html#series-scatter.label.position)、[label.distance](option.html#series-scatter.label.distance) 来配置。\r\n\r\n试试在下面例子中修改`position`和`distance` 属性：\r\n\r\n```js live\r\noption = {\r\n  series: [\r\n    {\r\n      type: 'scatter',\r\n      symbolSize: 160,\r\n      symbol: 'roundRect',\r\n      data: [[1, 1]],\r\n      label: {\r\n        // 修改 position 和 distance 的值试试\r\n        // 支持：'left', 'right', 'top', 'bottom', 'inside', 'insideTop', 'insideLeft', 'insideRight', 'insideBottom', 'insideTopLeft', 'insideTopRight', 'insideBottomLeft', 'insideBottomRight'\r\n        position: 'top',\r\n        distance: 10,\r\n\r\n        show: true,\r\n        formatter: ['Label Text'].join('\\n'),\r\n        backgroundColor: '#eee',\r\n        borderColor: '#555',\r\n        borderWidth: 2,\r\n        borderRadius: 5,\r\n        padding: 10,\r\n        fontSize: 18,\r\n        shadowBlur: 3,\r\n        shadowColor: '#888',\r\n        shadowOffsetX: 0,\r\n        shadowOffsetY: 3,\r\n        textBorderColor: '#000',\r\n        textBorderWidth: 3,\r\n        color: '#fff'\r\n      }\r\n    }\r\n  ],\r\n  xAxis: {\r\n    max: 2\r\n  },\r\n  yAxis: {\r\n    max: 2\r\n  }\r\n};\r\n```\r\n\r\n> 注意：`position` 在不同的图中可取值有所不同。`distance` 并不是在每个图中都支持。详情请参见 [option 文档](${mainSitePath}option.html)。\r\n\r\n## 标签的旋转\r\n\r\n某些图中，为了能有足够长的空间来显示标签，需要对标签进行旋转。例如：\r\n\r\n```js live {layout: 'lr'}\r\nconst labelOption = {\r\n  show: true,\r\n  rotate: 90,\r\n  formatter: '{c}  {name|{a}}',\r\n  fontSize: 16,\r\n  rich: {\r\n    name: {}\r\n  }\r\n};\r\n\r\noption = {\r\n  xAxis: [\r\n    {\r\n      type: 'category',\r\n      data: ['2012', '2013', '2014', '2015', '2016']\r\n    }\r\n  ],\r\n  yAxis: [\r\n    {\r\n      type: 'value'\r\n    }\r\n  ],\r\n  series: [\r\n    {\r\n      name: 'Forest',\r\n      type: 'bar',\r\n      barGap: 0,\r\n      label: labelOption,\r\n      emphasis: {\r\n        focus: 'series'\r\n      },\r\n      data: [320, 332, 301, 334, 390]\r\n    },\r\n    {\r\n      name: 'Steppe',\r\n      type: 'bar',\r\n      label: labelOption,\r\n      emphasis: {\r\n        focus: 'series'\r\n      },\r\n      data: [220, 182, 191, 234, 290]\r\n    }\r\n  ]\r\n};\r\n```\r\n\r\n这种场景下，可以结合 [align](option.html#series-bar.label.align) 和 [verticalAlign](option.html#series-bar.label.verticalAlign) 来调整标签位置。\r\n\r\n注意，逻辑是，先使用 `align` 和 `verticalAlign` 定位，再旋转。\r\n\r\n## 文本片段的排版和对齐\r\n\r\n关于排版方式，每个文本片段，可以想象成 CSS 中的 `inline-block`，在文档流中按行放置。\r\n\r\n每个文本片段的内容盒尺寸（`content box size`），默认是根据文字大小决定的。但是，也可以设置 `width`、`height` 来强制指定，虽然一般不会这么做（参见下文）。文本片段的边框盒尺寸（`border box size`），由上述本身尺寸，加上文本片段的 `padding` 来得到。\r\n\r\n只有 `'\\n'` 是换行符，能导致换行。\r\n\r\n一行内，会有多个文本片段。每行的实际高度，由 `lineHeight` 最大的文本片段决定。文本片段的 `lineHeight` 可直接在 `rich` 中指定，也可以在 `rich` 的父层级中统一指定而采用到 `rich` 的所有项中，如果都不指定，则取文本片段的边框盒尺寸（`border box size`）。\r\n\r\n在一行的 `lineHeight` 被决定后，一行内，文本片段的竖直位置，由文本片段的 `verticalAlign` 来指定（这里和 CSS 中的规则稍有不同）：\r\n\r\n- `'bottom'`：文本片段的盒的底边贴住行底。\r\n- `'top'`：文本片段的盒的顶边贴住行顶。\r\n- `'middle'`：居行中。\r\n\r\n文本块的宽度，可以直接由文本块的 `width` 指定，否则，由最长的行决定。宽度决定后，在一行中进行文本片段的放置。文本片段的 `align` 决定了文本片段在行中的水平位置：\r\n\r\n- 首先，从左向右连续紧靠放置 `align` 为 `'left'` 的文本片段盒。\r\n- 然后，从右向左连续紧靠放置 `align` 为 `'right'` 的文本片段盒。\r\n- 最后，剩余的没处理的文本片段盒，紧贴着，在中间剩余的区域中居中放置。\r\n\r\n关于文字在文本片段盒中的位置：\r\n\r\n- 如果 `align` 为 `'center'`，则文字在文本片段盒中是居中的。\r\n- 如果 `align` 为 `'left'`，则文字在文本片段盒中是居左的。\r\n- 如果 `align` 为 `'right'`，则文字在文本片段盒中是居右的。\r\n\r\n## 特殊效果：图标、分割线、标题块、简单表格\r\n\r\n看下面的例子：\r\n\r\n```js live {layout: 'lr'}\r\noption = {\r\n  series: [\r\n    {\r\n      type: 'scatter',\r\n      data: [\r\n        {\r\n          value: [0, 0],\r\n          label: {\r\n            formatter: [\r\n              '{tc|Center Title}{titleBg|}',\r\n              '  Content text xxxxxxxx {sunny|} xxxxxxxx {cloudy|}  ',\r\n              '{hr|}',\r\n              '  xxxxx {showers|} xxxxxxxx  xxxxxxxxx  '\r\n            ].join('\\n'),\r\n            rich: {\r\n              titleBg: {\r\n                align: 'right'\r\n              }\r\n            }\r\n          }\r\n        },\r\n        {\r\n          value: [0, 1],\r\n          label: {\r\n            formatter: [\r\n              '{titleBg|Left Title}',\r\n              '  Content text xxxxxxxx {sunny|} xxxxxxxx {cloudy|}  ',\r\n              '{hr|}',\r\n              '  xxxxx {showers|} xxxxxxxx  xxxxxxxxx  '\r\n            ].join('\\n')\r\n          }\r\n        },\r\n        {\r\n          value: [0, 2],\r\n          label: {\r\n            formatter: [\r\n              '{titleBg|Right Title}',\r\n              '  Content text xxxxxxxx {sunny|} xxxxxxxx {cloudy|}  ',\r\n              '{hr|}',\r\n              '  xxxxx {showers|} xxxxxxxx  xxxxxxxxx  '\r\n            ].join('\\n'),\r\n            rich: {\r\n              titleBg: {\r\n                align: 'right'\r\n              }\r\n            }\r\n          }\r\n        }\r\n      ],\r\n      symbolSize: 1,\r\n      label: {\r\n        show: true,\r\n        backgroundColor: '#ddd',\r\n        borderColor: '#555',\r\n        borderWidth: 1,\r\n        borderRadius: 5,\r\n        color: '#000',\r\n        fontSize: 14,\r\n        rich: {\r\n          titleBg: {\r\n            backgroundColor: '#000',\r\n            height: 30,\r\n            borderRadius: [5, 5, 0, 0],\r\n            padding: [0, 10, 0, 10],\r\n            width: '100%',\r\n            color: '#eee'\r\n          },\r\n          tc: {\r\n            align: 'center',\r\n            color: '#eee'\r\n          },\r\n          hr: {\r\n            borderColor: '#777',\r\n            width: '100%',\r\n            borderWidth: 0.5,\r\n            height: 0\r\n          },\r\n          sunny: {\r\n            height: 30,\r\n            align: 'left',\r\n            backgroundColor: {\r\n              image:\r\n                '/examples/data/asset/img/weather/sunny_128.png'\r\n            }\r\n          },\r\n          cloudy: {\r\n            height: 30,\r\n            align: 'left',\r\n            backgroundColor: {\r\n              image:\r\n                '/examples/data/asset/img/weather/cloudy_128.png'\r\n            }\r\n          },\r\n          showers: {\r\n            height: 30,\r\n            align: 'left',\r\n            backgroundColor: {\r\n              image:\r\n                '/examples/data/asset/img/weather/showers_128.png'\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  ],\r\n  xAxis: {\r\n    show: false,\r\n    min: -1,\r\n    max: 1\r\n  },\r\n  yAxis: {\r\n    show: false,\r\n    min: 0,\r\n    max: 2,\r\n    inverse: true\r\n  }\r\n};\r\n```\r\n\r\n文本片段的 `backgroundColor` 可以指定为图片后，就可以在文本中使用图标了：\r\n\r\n```js\r\nlabelOption = {\r\n  rich: {\r\n    Sunny: {\r\n      // 这样设定 backgroundColor 就可以是图片了。\r\n      backgroundColor: {\r\n        image: './data/asset/img/weather/sunny_128.png'\r\n      },\r\n      // 可以只指定图片的高度，从而图片的宽度根据图片的长宽比自动得到。\r\n      height: 30\r\n    }\r\n  }\r\n};\r\n```\r\n\r\n分割线实际是用 border 实现的：\r\n\r\n```js\r\nlabelOption = {\r\n  rich: {\r\n    hr: {\r\n      borderColor: '#777',\r\n      // 这里把 width 设置为 '100%'，表示分割线的长度充满文本块。\r\n      // 注意，这里是文本块内容盒（content box）的 100%，而不包含 padding。\r\n      // 虽然这和 CSS 相关的定义有所不同，但是在这类场景中更加方便。\r\n      width: '100%',\r\n      borderWidth: 0.5,\r\n      height: 0\r\n    }\r\n  }\r\n};\r\n```\r\n\r\n标题块是使用 `backgroundColor` 实现的：\r\n\r\n```js\r\nlabelOption = {\r\n  // 标题文字居左\r\n  formatter: '{titleBg|Left Title}',\r\n  rich: {\r\n    titleBg: {\r\n      backgroundColor: '#000',\r\n      height: 30,\r\n      borderRadius: [5, 5, 0, 0],\r\n      padding: [0, 10, 0, 10],\r\n      width: '100%',\r\n      color: '#eee'\r\n    }\r\n  }\r\n};\r\n\r\n// 标题文字居中。\r\n// 这个实现有些 tricky，但是，能够不引入更复杂的排版规则而实现这个效果。\r\nlabelOption = {\r\n  formatter: '{tc|Center Title}{titleBg|}',\r\n  rich: {\r\n    titleBg: {\r\n      align: 'right',\r\n      backgroundColor: '#000',\r\n      height: 30,\r\n      borderRadius: [5, 5, 0, 0],\r\n      padding: [0, 10, 0, 10],\r\n      width: '100%',\r\n      color: '#eee'\r\n    }\r\n  }\r\n};\r\n```\r\n\r\n简单表格的设定，其实就是给不同行上纵向对应的文本片段设定同样的宽度就可以了。见 [该例子](${exampleEditorPath}pie-rich-text)\r\n"}}]);